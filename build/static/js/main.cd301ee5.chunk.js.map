{"version":3,"sources":["TodoInput.js","TodoItem.js","leanCloud.js","ForgotPasswordForm.js","SignUpForm.js","SignInForm.js","SignInOrSignUp.js","UserDialog.js","App.js","index.js"],"names":["submit","props","e","key","onSubmit","changeTitle","onChange","type","value","content","className","bind","onKeyPress","TodoItem","checked","this","todo","status","toggle","title","onClick","delete","onToggle","onDelete","Component","AV","init","appId","appKey","getCurrentUser","user","User","current","getUserFromAVUser","AVUser","id","attributes","ForgotPasswordForm","formData","email","href","onSignIn","username","password","onForgotPassword","SignInOrSignUp","state","selected","setState","target","switch","SignUpForm","onSignUp","SignInForm","UserDialog","selectedTab","preventDefault","successFn","errorFn","setUsername","setPassword","setEmail","signUp","then","loginedUser","call","error","code","alert","logIn","signIn","stateCopy","JSON","parse","stringify","changeFormData","showForgotPassword","resetPassword","returnToSignIn","requestPasswordReset","success","App","newTodo","todoList","todos","filter","item","deleted","map","index","signOut","addTodo","onSignUpOrSignIn","logOut","event","push","idMaker","React","div","document","getElementById","ReactDOM","render"],"mappings":"iVAGA,SAASA,EAAQC,EAAOC,GACR,UAAVA,EAAEC,KACJF,EAAMG,SAASF,GAGnB,SAASG,EAAaJ,EAAOC,GAC3BD,EAAMK,SAASJ,GAOF,eAAUD,GACvB,OAAO,2BAAOM,KAAK,OAAOC,MAAOP,EAAMQ,QACrCC,UAAU,YACVJ,SAAUD,EAAYM,KAAK,KAAMV,GACjCW,WAAYZ,EAAOW,KAAK,KAAMV,MCjBbY,G,uLAEjB,OACE,yBAAKH,UAAU,YACb,2BAAOH,KAAK,WAAWO,QAAoC,cAA3BC,KAAKd,MAAMe,KAAKC,OAC9CX,SAAUS,KAAKG,OAAOP,KAAKI,QAC7B,0BAAML,UAAU,SAASK,KAAKd,MAAMe,KAAKG,OACzC,4BAAQC,QAASL,KAAKM,OAAOV,KAAKI,OAAlC,mB,6BAICb,GACLa,KAAKd,MAAMqB,SAASpB,EAAGa,KAAKd,MAAMe,Q,6BAE7Bd,GACLa,KAAKd,MAAMsB,SAASrB,EAAGa,KAAKd,MAAMe,U,GAfAQ,c,yQCCtCC,IAAGC,KAAK,CACNC,MAHW,oCAIXC,OAHY,6BAMCH,EAAf,EA+BO,SAASI,IACd,IAAIC,EAAOL,IAAGM,KAAKC,UACnB,OAAGF,EACMG,EAAkBH,GAElB,KAiBX,SAASG,EAAkBC,GAC1B,O,yVAAO,CAAP,CACEC,GAAID,EAAOC,IACRD,EAAOE,Y,IC/DQC,E,iLAEjB,OACE,yBAAK3B,UAAU,kBACb,wDAGA,0BAAMA,UAAU,iBAAiBN,SAAUW,KAAKd,MAAMG,UAAtD,IACE,yBAAKM,UAAU,OACb,+CACA,2BAAOH,KAAK,OAAOC,MAAOO,KAAKd,MAAMqC,SAASC,MAC5CjC,SAAUS,KAAKd,MAAMK,SAASK,KAAK,KAAM,YAE7C,yBAAKD,UAAU,eACb,4BAAQH,KAAK,UAAb,wCACA,uBAAGiC,KAAK,IAAIpB,QAASL,KAAKd,MAAMwC,UAAhC,mC,GAfoCjB,aCDjC,WAAUvB,GACvB,OACE,0BAAMS,UAAU,SAASN,SAAUH,EAAMG,SAASO,KAAKI,OAAvD,IACE,yBAAKL,UAAU,OACb,+CACA,2BAAOH,KAAK,OAAOC,MAAOP,EAAMqC,SAASC,MACvCjC,SAAUL,EAAMK,SAASK,KAAK,KAAM,YAExC,yBAAKD,UAAU,OACb,qDACA,2BAAOH,KAAK,OAAOC,MAAOP,EAAMqC,SAASI,SACvCpC,SAAUL,EAAMK,SAASK,KAAK,KAAM,eAGxC,yBAAKD,UAAU,OACb,+CACA,2BAAOH,KAAK,WAAWC,MAAOP,EAAMqC,SAASK,SAC3CrC,SAAUL,EAAMK,SAASK,KAAK,KAAM,eAExC,yBAAKD,UAAU,eACb,4BAAQH,KAAK,UAAb,mBCpBO,WAAUN,GACvB,OACE,0BAAMS,UAAU,SAASN,SAAUH,EAAMG,UAAzC,IACE,yBAAKM,UAAU,OACb,qDACA,2BAAOH,KAAK,OAAOC,MAAOP,EAAMqC,SAASI,SACvCpC,SAAUL,EAAMK,SAASK,KAAK,KAAM,eAExC,yBAAKD,UAAU,OACb,+CACA,2BAAOH,KAAK,WAAWC,MAAOP,EAAMqC,SAASK,SAC3CrC,SAAUL,EAAMK,SAASK,KAAK,KAAM,eAExC,yBAAKD,UAAU,eACb,4BAAQH,KAAK,UAAb,gBACA,uBAAGiC,KAAK,IAAIpB,QAASnB,EAAM2C,kBAA3B,2CCZaC,E,YACnB,WAAa5C,GAAQ,IAAD,8BAClB,4CAAMA,KACD6C,MAAQ,CACXC,SAAU,UAHM,E,oEAOZ7C,GACNa,KAAKiC,SAAS,CACZD,SAAU7C,EAAE+C,OAAOzC,U,+BAKrB,OACE,yBAAKE,UAAU,kBACb,6BACE,+BACE,2BAAOH,KAAK,QAAQC,MAAM,SACxBM,QAAiC,WAAxBC,KAAK+B,MAAMC,SACpBzC,SAAUS,KAAKmC,OAAOvC,KAAKI,QAH/B,iBAKA,+BACE,2BAAOR,KAAK,QAAQC,MAAM,SACxBM,QAAiC,WAAxBC,KAAK+B,MAAMC,SACpBzC,SAAUS,KAAKmC,OAAOvC,KAAKI,QAH/B,kBAMF,yBAAKL,UAAU,SACY,WAAxBK,KAAK+B,MAAMC,SACV,kBAACI,EAAD,CAAYb,SAAUvB,KAAKd,MAAMqC,SAC/BlC,SAAUW,KAAKd,MAAMmD,SACrB9C,SAAUS,KAAKd,MAAMK,WAErB,KACqB,WAAxBS,KAAK+B,MAAMC,SACV,kBAACM,EAAD,CAAYf,SAAUvB,KAAKd,MAAMqC,SAC/BhC,SAAUS,KAAKd,MAAMK,SACrBF,SAAUW,KAAKd,MAAMwC,SACrBG,iBAAkB7B,KAAKd,MAAM2C,mBAE7B,W,GA1C8BpB,aCCvB8B,E,YACjB,WAAYrD,GAAO,IAAD,8BACd,4CAAMA,KACD6C,MAAQ,CACTS,YAAa,iBACbjB,SAAU,CACNC,MAAO,GACTG,SAAU,GACVC,SAAU,KAPF,E,oEAWTzC,GAAG,IAAD,OACPA,EAAEsD,iBADK,MAE2BzC,KAAK+B,MAAMR,ULR9C,SAAgBC,EAAOG,EAAUC,EAAUc,EAAWC,GAE5D,IAAI5B,EAAO,IAAIL,IAAGM,KAElBD,EAAK6B,YAAYjB,GAEjBZ,EAAK8B,YAAYjB,GAEjBb,EAAK+B,SAAStB,GAEdT,EAAKgC,SAASC,MAAK,SAAUC,GAC3B,IAAIlC,EAAOG,EAAkB+B,GAC7BP,EAAUQ,KAAK,KAAMnC,MACpB,SAAUoC,GACXR,EAAQO,KAAK,KAAMC,MKQdJ,CAhBO,EAEFvB,MAFE,EAEKG,SAFL,EAEeC,UACR,SAACb,GACX,EAAK7B,MAAMmD,SAASa,KAAK,KAAMnC,MAEvB,SAACoC,GACT,OAAOA,EAAMC,MACT,KAAK,IACHC,MAAM,8CACN,MACF,QACEA,MAAMF,S,6BAMXhE,GAAG,IAAD,OACPA,EAAEsD,iBADK,MAEoBzC,KAAK+B,MAAMR,ULLvC,SAAgBI,EAAUC,EAAUc,EAAWC,GACpDjC,IAAGM,KAAKsC,MAAM3B,EAAUC,GAAUoB,MAAK,SAAUC,GAC/C,IAAIlC,EAAOG,EAAkB+B,GAC7BP,EAAUQ,KAAK,KAAMnC,MACpB,SAAUoC,GACXR,EAAQO,KAAK,KAAMC,MKcfI,CAhBO,EAEF5B,SAFE,EAEQC,UACD,SAACb,GACb,EAAK7B,MAAMwC,SAASwB,KAAK,KAAMnC,MAErB,SAACoC,GACT,OAAOA,EAAMC,MACT,KAAK,IACHC,MAAM,0DACN,MACF,QACEA,MAAMF,S,qCAMH/D,EAAKD,GAClB,IAAIqE,EAAYC,KAAKC,MAAMD,KAAKE,UAAU3D,KAAK+B,QAC/CyB,EAAUjC,SAASnC,GAAOD,EAAE+C,OAAOzC,MACnCO,KAAKiC,SAASuB,K,+BAGlB,OACE,yBAAK7D,UAAU,sBACb,yBAAKA,UAAU,cAEgB,mBAA3BK,KAAK+B,MAAMS,YACT,kBAAC,EAAD,CACEjB,SAAUvB,KAAK+B,MAAMR,SACrBG,SAAU1B,KAAKuD,OAAO3D,KAAKI,MAC3BqC,SAAUrC,KAAK+C,OAAOnD,KAAKI,MAC3BT,SAAUS,KAAK4D,eAAehE,KAAKI,MACnC6B,iBAAkB7B,KAAK6D,mBAAmBjE,KAAKI,QAEnD,kBAAC,EAAD,CACEuB,SAAUvB,KAAK+B,MAAMR,SACrBlC,SAAUW,KAAK8D,cAAclE,KAAKI,MAClCT,SAAUS,KAAK4D,eAAehE,KAAKI,MACnC0B,SAAU1B,KAAK+D,eAAenE,KAAKI,Y,2CAQ7C,IAAIwD,EAAYC,KAAKC,MAAMD,KAAKE,UAAU3D,KAAK+B,QAC/CyB,EAAUhB,YAAc,iBACxBxC,KAAKiC,SAASuB,K,uCAGd,IAAIA,EAAYC,KAAKC,MAAMD,KAAKE,UAAU3D,KAAK+B,QAC/CyB,EAAUhB,YAAc,iBACxBxC,KAAKiC,SAASuB,K,oCAEFrE,GLvCT,IAAgCqC,EAAOkB,EAAWC,EKyCrDxD,EAAEsD,iBLzCiCjB,EK0CZxB,KAAK+B,MAAMR,SAASC,MLzC7Cd,IAAGM,KAAKgD,qBAAqBxC,GAAOwB,MAAK,SAAUiB,GACjDvB,EAAUQ,UACT,SAAUC,GACXR,EAAQO,KAAK,KAAMC,U,GKpDiB1C,aCyFzByD,E,YApFb,WAAYhF,GAAO,IAAD,8BAChB,4CAAMA,KACD6C,MAAQ,CACXhB,KAAMD,KAAoB,GAC1BqD,QAAS,GACTC,SAAU,IALI,E,sEAQT,IAAD,OACFC,EAAQrE,KAAK+B,MAAMqC,SACpBE,QAAO,SAACC,GAAD,OAAUA,EAAKC,WACtBC,KAAI,SAACF,EAAKG,GACX,OACE,wBAAItF,IAAKsF,GACP,kBAAC,EAAD,CAAUzE,KAAMsE,EAAMhE,SAAU,EAAKJ,OAAOP,KAAK,GAC/CY,SAAU,EAAKF,OAAOV,KAAK,SAMnC,OACE,yBAAKD,UAAU,OACb,wBAAIA,UAAU,SAASK,KAAK+B,MAAMhB,KAAKY,UAAU,SAAjD,qBACG3B,KAAK+B,MAAMhB,KAAKK,GAAK,4BAAQf,QAASL,KAAK2E,QAAQ/E,KAAKI,OAAnC,gBAAwD,MAEjF,yBAAKL,UAAU,gBACf,kBAAC,EAAD,CAAWD,QAASM,KAAK+B,MAAMoC,QAC1B5E,SAAUS,KAAKV,YAAYM,KAAKI,MAChCX,SAAUW,KAAK4E,QAAQhF,KAAKI,SAEjC,wBAAIL,UAAU,YACb0E,GAEArE,KAAK+B,MAAMhB,KAAKK,GACd,KACA,kBAAC,EAAD,CACAiB,SAAUrC,KAAK6E,iBAAiBjF,KAAKI,MACrC0B,SAAU1B,KAAK6E,iBAAiBjF,KAAKI,W,gCNC7CU,IAAGM,KAAK8D,SMKN,IAAItB,EAAYC,KAAKC,MAAMD,KAAKE,UAAU3D,KAAK+B,QAC/CyB,EAAUzC,KAAO,GACjBf,KAAKiC,SAASuB,K,uCAECzC,GACf,IAAIyC,EAAYC,KAAKC,MAAMD,KAAKE,UAAU3D,KAAK+B,QAC/CyB,EAAUzC,KAAOA,EACjBf,KAAKiC,SAASuB,K,2EAKTrE,EAAGc,GACRA,EAAKC,OAAyB,cAAhBD,EAAKC,OAAyB,GAAK,YACjDF,KAAKiC,SAASjC,KAAK+B,S,kCAETgD,GACV/E,KAAKiC,SAAS,CACZkC,QAASY,EAAM7C,OAAOzC,MACtB2E,SAAUpE,KAAK+B,MAAMqC,a,8BAGjBW,GACN/E,KAAK+B,MAAMqC,SAASY,KAAK,CACvB5D,GAAI6D,IACJ7E,MAAO2E,EAAM7C,OAAOzC,MACpBS,OAAQ,KACRsE,SAAS,IAEXxE,KAAKiC,SAAS,CACZkC,QAAS,GACTC,SAAUpE,KAAK+B,MAAMqC,a,6BAGlBW,EAAO9E,GACZA,EAAKuE,SAAU,EACfxE,KAAKiC,SAASjC,KAAK+B,W,GAjFLmD,IAAMzE,WAuFpBW,EAAK,EAET,SAAS6D,IAEP,OADA7D,GAAM,EC/FR,IAAI+D,EAAMC,SAASC,eAAe,QAClCC,IAASC,OAAO,kBAAC,EAAD,MAASJ,K","file":"static/js/main.cd301ee5.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport './TodoInput.css';\r\n\r\nfunction submit (props, e) {\r\n  if (e.key === 'Enter') {\r\n    props.onSubmit(e)\r\n  }\r\n}\r\nfunction changeTitle (props, e) {\r\n  props.onChange(e)\r\n}\r\n\r\n// 搞不清楚 bind 用法的同学，请看完 MDN\r\n// https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\r\n// 尤其是示例要看懂\r\n\r\nexport default function (props) {\r\n  return <input type=\"text\" value={props.content}\r\n    className=\"TodoInput\"\r\n    onChange={changeTitle.bind(null, props)}\r\n    onKeyPress={submit.bind(null, props)}/>\r\n}\r\n","import React, { Component } from 'react';\r\nimport './TodoItem.css';\r\n\r\nexport default class TodoItem extends Component {\r\n  render(){\r\n    return (\r\n      <div className=\"TodoItem\">\r\n        <input type=\"checkbox\" checked={this.props.todo.status === 'completed'}\r\n          onChange={this.toggle.bind(this)}/>\r\n        <span className=\"title\">{this.props.todo.title}</span>\r\n        <button onClick={this.delete.bind(this)}>删除</button>\r\n      </div>\r\n    )\r\n  }\r\n  toggle(e){\r\n    this.props.onToggle(e, this.props.todo)\r\n  }\r\n  delete(e){\r\n    this.props.onDelete(e, this.props.todo)\r\n  }\r\n}","import AV from 'leancloud-storage'\r\n\r\nvar APP_ID = \"pk0vzR4lHpYNoVUJhuV1L71I-9Nh9j0Va\";\r\nvar APP_KEY = \"1fDDSPbetyosgjESkfoEaO64\";\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n})\r\n\r\nexport default AV\r\n\r\nexport function signUp(email, username, password, successFn, errorFn){\r\n  // 新建 AVUser 对象实例\r\n var user = new AV.User()\r\n // 设置用户名\r\n user.setUsername(username)\r\n // 设置密码\r\n user.setPassword(password)\r\n // 设置邮箱\r\n user.setEmail(email)\r\n\r\n user.signUp().then(function (loginedUser) {\r\n   let user = getUserFromAVUser(loginedUser)\r\n   successFn.call(null, user)\r\n }, function (error) {\r\n   errorFn.call(null, error)\r\n })\r\n\r\n return undefined\r\n\r\n}\r\n\r\nexport function signIn(username, password, successFn, errorFn){\r\n  AV.User.logIn(username, password).then(function (loginedUser) {\r\n    let user = getUserFromAVUser(loginedUser)\r\n    successFn.call(null, user)\r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n}\r\nexport function getCurrentUser(){\r\n  let user = AV.User.current()\r\n  if(user){\r\n    return getUserFromAVUser(user)\r\n  }else{\r\n    return null\r\n  }\r\n}\r\nexport function signOut(){\r\n  AV.User.logOut()\r\n  return undefined\r\n}\r\n\r\nexport function sendPasswordResetEmail(email, successFn, errorFn){\r\n  AV.User.requestPasswordReset(email).then(function (success) {\r\n    successFn.call() \r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n}\r\n\r\n\r\nfunction getUserFromAVUser(AVUser){\r\n return {\r\n   id: AVUser.id,\r\n   ...AVUser.attributes\r\n  }\r\n}","import React, {Component} from 'react';\r\n\r\nexport default class ForgotPasswordForm extends Component {\r\n  render () {\r\n    return (\r\n      <div className=\"forgotPassword\">\r\n        <h3>\r\n          重置密码\r\n        </h3>\r\n        <form className=\"forgotPassword\" onSubmit={this.props.onSubmit}> {/* 登录*/}\r\n          <div className=\"row\">\r\n            <label>邮箱</label>\r\n            <input type=\"text\" value={this.props.formData.email}\r\n              onChange={this.props.onChange.bind(null, 'email')}/>\r\n          </div>\r\n          <div className=\"row actions\">\r\n            <button type=\"submit\">发送重置邮件</button>\r\n            <a href=\"#\" onClick={this.props.onSignIn}>返回登录</a>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nexport default function (props) {\r\n  return (\r\n    <form className=\"signUp\" onSubmit={props.onSubmit.bind(this)}> {/* 注册*/}\r\n      <div className=\"row\">\r\n        <label>邮箱</label>\r\n        <input type=\"text\" value={props.formData.email}\r\n          onChange={props.onChange.bind(null, 'email')}/>\r\n      </div>\r\n      <div className=\"row\">\r\n        <label>用户名</label>\r\n        <input type=\"text\" value={props.formData.username}\r\n          onChange={props.onChange.bind(null, 'username')}/>\r\n        {/* bind 不仅可以绑定 this，还可以绑定第一个参数 */}\r\n      </div>\r\n      <div className=\"row\">\r\n        <label>密码</label>\r\n        <input type=\"password\" value={props.formData.password}\r\n          onChange={props.onChange.bind(null, 'password')}/>\r\n      </div>\r\n      <div className=\"row actions\">\r\n        <button type=\"submit\">注册</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}","import React from 'react';\r\nexport default function (props) {\r\n  return (\r\n    <form className=\"signIn\" onSubmit={props.onSubmit}> {/* 登录*/}\r\n      <div className=\"row\">\r\n        <label>用户名</label>\r\n        <input type=\"text\" value={props.formData.username}\r\n          onChange={props.onChange.bind(null, 'username')}/>\r\n      </div>\r\n      <div className=\"row\">\r\n        <label>密码</label>\r\n        <input type=\"password\" value={props.formData.password}\r\n          onChange={props.onChange.bind(null, 'password')}/>\r\n      </div>\r\n      <div className=\"row actions\">\r\n        <button type=\"submit\">登录</button>\r\n        <a href=\"#\" onClick={props.onForgotPassword}>忘记密码了？</a>\r\n      </div>\r\n    </form>\r\n  )\r\n}","import React, {Component} from 'react';\r\nimport SignUpForm from './SignUpForm'\r\nimport SignInForm from './SignInForm'\r\n\r\nexport default class SignInOrSignUp extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      selected: 'signUp'\r\n    }\r\n  }\r\n\r\n  switch (e) {\r\n    this.setState({\r\n      selected: e.target.value\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"signInOrSignUp\">\r\n        <nav>\r\n          <label>\r\n            <input type=\"radio\" value=\"signUp\"\r\n              checked={this.state.selected === 'signUp'}\r\n              onChange={this.switch.bind(this)}\r\n            /> 注册</label>\r\n          <label>\r\n            <input type=\"radio\" value=\"signIn\"\r\n              checked={this.state.selected === 'signIn'}\r\n              onChange={this.switch.bind(this)}\r\n            /> 登录</label>\r\n        </nav>\r\n        <div className=\"panes\">\r\n          {this.state.selected === 'signUp' ?\r\n            <SignUpForm formData={this.props.formData}\r\n              onSubmit={this.props.onSignUp}\r\n              onChange={this.props.onChange}\r\n            />\r\n            : null}\r\n          {this.state.selected === 'signIn' ?\r\n            <SignInForm formData={this.props.formData}\r\n              onChange={this.props.onChange}\r\n              onSubmit={this.props.onSignIn}\r\n              onForgotPassword={this.props.onForgotPassword}\r\n            />\r\n            : null}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './UserDialog.css';\r\nimport {signUp, signIn, sendPasswordResetEmail} from './leanCloud'\r\nimport ForgotPasswordForm from './ForgotPasswordForm'\r\nimport SignInOrSignUp from './SignInOrSignUp'\r\nexport default class UserDialog extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            selectedTab: 'signInOrSignUp', // 'forgotPassword'\r\n            formData: {\r\n                email: '',\r\n              username: '',\r\n              password: '',\r\n            }\r\n        }\r\n      }\r\n      signUp(e){\r\n        e.preventDefault()\r\n        let {email, username, password} = this.state.formData\r\n        let success = (user)=>{\r\n            this.props.onSignUp.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 202:\r\n                  alert('用户名已被占用')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signUp(email, username, password, success, error)\r\n      }\r\n      signIn(e){\r\n        e.preventDefault()\r\n        let {username, password} = this.state.formData\r\n        let success = (user)=>{\r\n          this.props.onSignIn.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 210:\r\n                  alert('用户名与密码不匹配')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signIn(username, password, success, error)\r\n      }\r\n      changeFormData(key, e){\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))  // 用 JSON 深拷贝\r\n        stateCopy.formData[key] = e.target.value\r\n        this.setState(stateCopy)\r\n      }\r\n  render(){\r\n    return (\r\n      <div className=\"UserDialog-Wrapper\">\r\n        <div className=\"UserDialog\">\r\n        {\r\n            this.state.selectedTab === 'signInOrSignUp' ?\r\n              <SignInOrSignUp\r\n                formData={this.state.formData}\r\n                onSignIn={this.signIn.bind(this)}\r\n                onSignUp={this.signUp.bind(this)}\r\n                onChange={this.changeFormData.bind(this)}\r\n                onForgotPassword={this.showForgotPassword.bind(this)}\r\n              /> :\r\n            <ForgotPasswordForm\r\n              formData={this.state.formData}\r\n              onSubmit={this.resetPassword.bind(this)}\r\n              onChange={this.changeFormData.bind(this)}\r\n              onSignIn={this.returnToSignIn.bind(this)}\r\n              />\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  showForgotPassword(){\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    stateCopy.selectedTab = 'forgotPassword'\r\n    this.setState(stateCopy)\r\n  }\r\n  returnToSignIn(){\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    stateCopy.selectedTab = 'signInOrSignUp'\r\n    this.setState(stateCopy)\r\n  }\r\n  resetPassword(e){\r\n\r\n    e.preventDefault()\r\n    sendPasswordResetEmail(this.state.formData.email)    \r\n  }\r\n}","import React from 'react';\nimport './App.css';\nimport TodoInput from './TodoInput';\nimport TodoItem from './TodoItem';\nimport 'normalize.css';\nimport './reset.css';\nimport UserDialog from './UserDialog';\nimport {getCurrentUser, signOut} from './leanCloud'\n\nclass App extends React.Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: getCurrentUser() || {},\n      newTodo: '',\n      todoList: []\n    }\n  }\n  render(){\n    let todos = this.state.todoList\n      .filter((item)=> !item.deleted)\n      .map((item,index)=>{\n      return (\n        <li key={index}>\n          <TodoItem todo={item} onToggle={this.toggle.bind(this)} \n            onDelete={this.delete.bind(this)}/>\n        </li>\n      )\n    })\n   \n\n    return (\n      <div className=\"App\">\n        <h1 className=\"title\">{this.state.user.username||'我'}的待办\n          {this.state.user.id ? <button onClick={this.signOut.bind(this)}>登出</button> : null}\n        </h1>\n       <div className=\"inputWrapper\">\n       <TodoInput content={this.state.newTodo} \n            onChange={this.changeTitle.bind(this)}\n            onSubmit={this.addTodo.bind(this)} />\n       </div>\n       <ol className=\"todoList\">\n       {todos}\n       </ol>\n       {this.state.user.id ? \n          null : \n          <UserDialog \n          onSignUp={this.onSignUpOrSignIn.bind(this)} \n          onSignIn={this.onSignUpOrSignIn.bind(this)}/>}\n      </div>\n    )\n  }\n  signOut(){\n    signOut()\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\n    stateCopy.user = {}\n    this.setState(stateCopy)\n  }\n  onSignUpOrSignIn(user){\n    let stateCopy = JSON.parse(JSON.stringify(this.state)) \n    stateCopy.user = user\n    this.setState(stateCopy)\n  }\n  componentDidUpdate(){\n    \n  }\n  toggle(e, todo){\n    todo.status = todo.status === 'completed' ? '' : 'completed'\n    this.setState(this.state) \n  }\n  changeTitle(event){\n    this.setState({\n      newTodo: event.target.value,\n      todoList: this.state.todoList\n    })\n  }\n  addTodo(event){\n    this.state.todoList.push({\n      id: idMaker(),\n      title: event.target.value,\n      status: null,\n      deleted: false\n    })\n    this.setState({\n      newTodo: '',  \n      todoList: this.state.todoList\n    })\n  }\n  delete(event, todo){\n    todo.deleted = true\n    this.setState(this.state) \n  }\n}\n\nexport default App;\n\nlet id = 0\n\nfunction idMaker(){\n  id += 1\n  return id\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nlet div = document.getElementById('root')\nReactDOM.render(<App />, div);\n"],"sourceRoot":""}