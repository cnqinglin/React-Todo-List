{"version":3,"sources":["TodoInput.js","TodoItem.js","leanCloud.js","ForgotPasswordForm.js","SignUpForm.js","SignInForm.js","SignInOrSignUp.js","UserDialog.js","App.js","index.js"],"names":["TodoInput","type","value","this","props","content","className","onChange","changeTitle","bind","onKeyPress","submit","e","key","onSubmit","Component","TodoItem","checked","todo","status","toggle","title","onClick","delete","onToggle","onDelete","AV","init","appId","appKey","getCurrentUser","user","User","current","getUserFromAVUser","AVUser","id","attributes","ForgotPasswordForm","formData","email","href","onSignIn","SignUpForm","username","password","SignInForm","onForgotPassword","SignInOrSignUp","state","selected","setState","target","switch","onSignUp","UserDialog","selectedTab","preventDefault","successFn","errorFn","setUsername","setPassword","setEmail","signUp","then","loginedUser","call","error","code","alert","logIn","signIn","stateCopy","JSON","parse","stringify","changeFormData","showForgotPassword","resetPassword","returnToSignIn","requestPasswordReset","success","App","newTodo","todoList","todos","filter","item","deleted","map","index","signOut","addTodo","onSignUpOrSignIn","logOut","event","push","idMaker","React","div","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.91b22776.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './TodoInput.css';\r\n\r\nexport default class TodoInput extends Component {\r\n  render(){\r\n    return <input type=\"text\" value={this.props.content}\r\n        className=\"TodoInput\"\r\n        onChange={this.changeTitle.bind(this)}\r\n        onKeyPress={this.submit.bind(this)}/>\r\n  }\r\n  submit(e){\r\n    if (e.key === 'Enter') {\r\n        this.props.onSubmit(e)\r\n    }\r\n  }\r\n  changeTitle(e){\r\n    this.props.onChange(e)\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './TodoItem.css';\r\n\r\nexport default class TodoItem extends Component {\r\n  render(){\r\n    return (\r\n      <div className=\"TodoItem\">\r\n        <input type=\"checkbox\" checked={this.props.todo.status === 'completed'}\r\n          onChange={this.toggle.bind(this)}/>\r\n        <span className=\"title\">{this.props.todo.title}</span>\r\n        <button onClick={this.delete.bind(this)}>删除</button>\r\n      </div>\r\n    )\r\n  }\r\n  toggle(e){\r\n    this.props.onToggle(e, this.props.todo)\r\n  }\r\n  delete(e){\r\n    this.props.onDelete(e, this.props.todo)\r\n  }\r\n}","import AV from 'leancloud-storage'\r\n\r\nvar APP_ID = \"pk0vzR4lHpYNoVUJhuV1L71I-9Nh9j0Va\";\r\nvar APP_KEY = \"1fDDSPbetyosgjESkfoEaO64\";\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n})\r\n\r\nexport default AV\r\n\r\nexport function signUp(email, username, password, successFn, errorFn){\r\n  // 新建 AVUser 对象实例\r\n var user = new AV.User()\r\n // 设置用户名\r\n user.setUsername(username)\r\n // 设置密码\r\n user.setPassword(password)\r\n // 设置邮箱\r\n user.setEmail(email)\r\n\r\n user.signUp().then(function (loginedUser) {\r\n   let user = getUserFromAVUser(loginedUser)\r\n   successFn.call(null, user)\r\n }, function (error) {\r\n   errorFn.call(null, error)\r\n })\r\n\r\n return undefined\r\n\r\n}\r\n\r\nexport function signIn(username, password, successFn, errorFn){\r\n  AV.User.logIn(username, password).then(function (loginedUser) {\r\n    let user = getUserFromAVUser(loginedUser)\r\n    successFn.call(null, user)\r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n}\r\nexport function getCurrentUser(){\r\n  let user = AV.User.current()\r\n  if(user){\r\n    return getUserFromAVUser(user)\r\n  }else{\r\n    return null\r\n  }\r\n}\r\nexport function signOut(){\r\n  AV.User.logOut()\r\n  return undefined\r\n}\r\n\r\nexport function sendPasswordResetEmail(email, successFn, errorFn){\r\n  AV.User.requestPasswordReset(email).then(function (success) {\r\n    successFn.call() \r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n}\r\n\r\n\r\nfunction getUserFromAVUser(AVUser){\r\n return {\r\n   id: AVUser.id,\r\n   ...AVUser.attributes\r\n  }\r\n}","import React, {Component} from 'react';\r\n\r\nexport default class ForgotPasswordForm extends Component {\r\n  render () {\r\n    return (\r\n      <div className=\"forgotPassword\">\r\n        <h3>\r\n          重置密码\r\n        </h3>\r\n        <form className=\"forgotPassword\" onSubmit={this.props.onSubmit}> {/* 登录*/}\r\n          <div className=\"row\">\r\n            <label>邮箱</label>\r\n            <input type=\"text\" value={this.props.formData.email}\r\n              onChange={this.props.onChange.bind(null, 'email')}/>\r\n          </div>\r\n          <div className=\"row actions\">\r\n            <button type=\"submit\">发送重置邮件</button>\r\n            <a href=\"#\" onClick={this.props.onSignIn}>返回登录</a>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react';\r\n\r\nexport default class SignUpForm extends Component {\r\n  render () {\r\n    return (\r\n      <form className=\"signUp\" onSubmit={this.props.onSubmit.bind(this)}> {/* 注册*/}\r\n        <div className=\"row\">\r\n          <label>邮箱</label>\r\n          <input type=\"text\" value={this.props.formData.email}\r\n            onChange={this.props.onChange.bind(null, 'email')}/>\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" value={this.props.formData.username}\r\n            onChange={this.props.onChange.bind(null, 'username')}/>\r\n          {/* bind 不仅可以绑定 this，还可以绑定第一个参数 */}\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={this.props.formData.password}\r\n            onChange={this.props.onChange.bind(null, 'password')}/>\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">注册</button>\r\n        </div>\r\n      </form>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react';\r\n\r\nexport default class SignInForm extends Component {\r\n  render () {\r\n    return (\r\n      <form className=\"signIn\" onSubmit={this.props.onSubmit}> {/* 登录*/}\r\n        <div className=\"row\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" value={this.props.formData.username}\r\n            onChange={this.props.onChange.bind(null, 'username')}/>\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={this.props.formData.password}\r\n            onChange={this.props.onChange.bind(null, 'password')}/>\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">登录</button>\r\n          <a href=\"#\" onClick={this.props.onForgotPassword}>忘记密码了？</a>\r\n        </div>\r\n      </form>\r\n    )\r\n  }\r\n}","import React, {Component} from 'react';\r\nimport SignUpForm from './SignUpForm'\r\nimport SignInForm from './SignInForm'\r\n\r\nexport default class SignInOrSignUp extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n    this.state = {\r\n      selected: 'signUp'\r\n    }\r\n  }\r\n\r\n  switch (e) {\r\n    this.setState({\r\n      selected: e.target.value\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"signInOrSignUp\">\r\n        <nav>\r\n          <label>\r\n            <input type=\"radio\" value=\"signUp\"\r\n              checked={this.state.selected === 'signUp'}\r\n              onChange={this.switch.bind(this)}\r\n            /> 注册</label>\r\n          <label>\r\n            <input type=\"radio\" value=\"signIn\"\r\n              checked={this.state.selected === 'signIn'}\r\n              onChange={this.switch.bind(this)}\r\n            /> 登录</label>\r\n        </nav>\r\n        <div className=\"panes\">\r\n          {this.state.selected === 'signUp' ?\r\n            <SignUpForm formData={this.props.formData}\r\n              onSubmit={this.props.onSignUp}\r\n              onChange={this.props.onChange}\r\n            />\r\n            : null}\r\n          {this.state.selected === 'signIn' ?\r\n            <SignInForm formData={this.props.formData}\r\n              onChange={this.props.onChange}\r\n              onSubmit={this.props.onSignIn}\r\n              onForgotPassword={this.props.onForgotPassword}\r\n            />\r\n            : null}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport './UserDialog.css';\r\nimport {signUp, signIn, sendPasswordResetEmail} from './leanCloud'\r\nimport ForgotPasswordForm from './ForgotPasswordForm'\r\nimport SignInOrSignUp from './SignInOrSignUp'\r\nexport default class UserDialog extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            selectedTab: 'signInOrSignUp', // 'forgotPassword'\r\n            formData: {\r\n                email: '',\r\n              username: '',\r\n              password: '',\r\n            }\r\n        }\r\n      }\r\n      signUp(e){\r\n        e.preventDefault()\r\n        let {email, username, password} = this.state.formData\r\n        let success = (user)=>{\r\n            this.props.onSignUp.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 202:\r\n                  alert('用户名已被占用')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signUp(email, username, password, success, error)\r\n      }\r\n      signIn(e){\r\n        e.preventDefault()\r\n        let {username, password} = this.state.formData\r\n        let success = (user)=>{\r\n          this.props.onSignIn.call(null, user)\r\n        }\r\n        let error = (error)=>{\r\n            switch(error.code){\r\n                case 210:\r\n                  alert('用户名与密码不匹配')\r\n                  break\r\n                default:\r\n                  alert(error)\r\n                  break\r\n              }\r\n        }\r\n        signIn(username, password, success, error)\r\n      }\r\n      changeFormData(key, e){\r\n        let stateCopy = JSON.parse(JSON.stringify(this.state))  // 用 JSON 深拷贝\r\n        stateCopy.formData[key] = e.target.value\r\n        this.setState(stateCopy)\r\n      }\r\n  render(){\r\n    return (\r\n      <div className=\"UserDialog-Wrapper\">\r\n        <div className=\"UserDialog\">\r\n        {\r\n            this.state.selectedTab === 'signInOrSignUp' ?\r\n              <SignInOrSignUp\r\n                formData={this.state.formData}\r\n                onSignIn={this.signIn.bind(this)}\r\n                onSignUp={this.signUp.bind(this)}\r\n                onChange={this.changeFormData.bind(this)}\r\n                onForgotPassword={this.showForgotPassword.bind(this)}\r\n              /> :\r\n            <ForgotPasswordForm\r\n              formData={this.state.formData}\r\n              onSubmit={this.resetPassword.bind(this)}\r\n              onChange={this.changeFormData.bind(this)}\r\n              onSignIn={this.returnToSignIn.bind(this)}\r\n              />\r\n          }\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  showForgotPassword(){\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    stateCopy.selectedTab = 'forgotPassword'\r\n    this.setState(stateCopy)\r\n  }\r\n  returnToSignIn(){\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    stateCopy.selectedTab = 'signInOrSignUp'\r\n    this.setState(stateCopy)\r\n  }\r\n  resetPassword(e){\r\n\r\n    e.preventDefault()\r\n    sendPasswordResetEmail(this.state.formData.email)    \r\n  }\r\n}","import React from 'react';\nimport './App.css';\nimport TodoInput from './TodoInput';\nimport TodoItem from './TodoItem';\nimport 'normalize.css';\nimport './reset.css';\nimport UserDialog from './UserDialog';\nimport {getCurrentUser, signOut} from './leanCloud'\n\nclass App extends React.Component{\n  constructor(props){\n    super(props)\n    this.state = {\n      user: getCurrentUser() || {},\n      newTodo: '',\n      todoList: []\n    }\n  }\n  render(){\n    let todos = this.state.todoList\n      .filter((item)=> !item.deleted)\n      .map((item,index)=>{\n      return (\n        <li key={index}>\n          <TodoItem todo={item} onToggle={this.toggle.bind(this)} \n            onDelete={this.delete.bind(this)}/>\n        </li>\n      )\n    })\n   \n\n    return (\n      <div className=\"App\">\n        <h1 className=\"title\">{this.state.user.username||'我'}的待办\n          {this.state.user.id ? <button onClick={this.signOut.bind(this)}>登出</button> : null}\n        </h1>\n       <div className=\"inputWrapper\">\n       <TodoInput content={this.state.newTodo} \n            onChange={this.changeTitle.bind(this)}\n            onSubmit={this.addTodo.bind(this)} />\n       </div>\n       <ol className=\"todoList\">\n       {todos}\n       </ol>\n       {this.state.user.id ? \n          null : \n          <UserDialog \n          onSignUp={this.onSignUpOrSignIn.bind(this)} \n          onSignIn={this.onSignUpOrSignIn.bind(this)}/>}\n      </div>\n    )\n  }\n  signOut(){\n    signOut()\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\n    stateCopy.user = {}\n    this.setState(stateCopy)\n  }\n  onSignUpOrSignIn(user){\n    let stateCopy = JSON.parse(JSON.stringify(this.state)) \n    stateCopy.user = user\n    this.setState(stateCopy)\n  }\n  componentDidUpdate(){\n    \n  }\n  toggle(e, todo){\n    todo.status = todo.status === 'completed' ? '' : 'completed'\n    this.setState(this.state) \n  }\n  changeTitle(event){\n    this.setState({\n      newTodo: event.target.value,\n      todoList: this.state.todoList\n    })\n  }\n  addTodo(event){\n    this.state.todoList.push({\n      id: idMaker(),\n      title: event.target.value,\n      status: null,\n      deleted: false\n    })\n    this.setState({\n      newTodo: '',  \n      todoList: this.state.todoList\n    })\n  }\n  delete(event, todo){\n    todo.deleted = true\n    this.setState(this.state) \n  }\n}\n\nexport default App;\n\nlet id = 0\n\nfunction idMaker(){\n  id += 1\n  return id\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nlet div = document.getElementById('root')\nReactDOM.render(<App />, div);\n"],"sourceRoot":""}